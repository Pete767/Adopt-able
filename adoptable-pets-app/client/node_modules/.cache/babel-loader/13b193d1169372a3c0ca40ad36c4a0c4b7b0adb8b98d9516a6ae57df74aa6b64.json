{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Link,Route,Switch}from'react-router-dom';import'./App.css';import Toxins from'./Toxins';import Preferences from'./Preferences';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[pets,setPets]=useState([]);const[loading,setLoading]=useState(true);const[searchTerm,setSearchTerm]=useState('');const[user,setUser]=useState(null);const[token,setToken]=useState(null);useEffect(()=>{const storedToken=localStorage.getItem('token');if(storedToken){setToken(storedToken);}},[]);const fetchPets=async()=>{try{const response=await fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/pets?name\").concat(searchTerm),{headers:{'x-api-key':'4qHKXgfSzVbPVrZADVtJrJrsoPWjmTF6VcTGLVPk'}});const data=await response.json();setPets(data.animals);setLoading(false);}catch(error){console.error(error);}};useEffect(()=>{fetchPets();},[searchTerm]);const signup=async userData=>{try{const response=await fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/signup\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(userData)});const data=await response.json();setUser(data.user);setToken(data.token);localStorage.setItem('token',data.token);}catch(error){console.error(error);}};const login=async loginData=>{try{const response=await fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/login\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(loginData)});const data=await response.json();setUser(data.user);setToken(data.token);localStorage.setItem('token',data.token);}catch(error){console.error(error);}};const logout=()=>{setUser(null);setToken(null);localStorage.removeItem('token');fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/logout\"),{method:'POST'});};const savePreferences=async _ref=>{let{species,breed,preferences}=_ref;try{await fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/preferences\"),{method:'POST',headers:{'Content-Type':'application/json',Authorization:token},body:JSON.stringify({species,breed,preferences})});}catch(error){console.error(error);}};return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"nav\",{children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Adoptable Pets\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/toxins\",children:\"Common Pet Toxins\"})}),user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/preferences\",children:\"Preferences\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:logout,children:\"Logout\"})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Sign Up\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})})]})]})}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/toxins\",children:/*#__PURE__*/_jsx(Toxins,{})}),user&&/*#__PURE__*/_jsx(Route,{path:\"/preferences\",children:/*#__PURE__*/_jsx(Preferences,{savePreferences:savePreferences})}),/*#__PURE__*/_jsxs(Route,{path:\"/\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Adoptable Pets\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by name\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):/*#__PURE__*/_jsx(\"ul\",{children:pets.map(pet=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"img\",{src:pet.photos.length>0?pet.photos[0].medium:'no-image',alt:pet.name}),/*#__PURE__*/_jsx(\"h2\",{children:pet.name}),/*#__PURE__*/_jsx(\"p\",{children:pet.description})]},pet.id))})]})]})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Link","Route","Switch","Toxins","Preferences","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","App","pets","setPets","loading","setLoading","searchTerm","setSearchTerm","user","setUser","token","setToken","storedToken","localStorage","getItem","fetchPets","response","fetch","concat","process","env","REACT_APP_API_URL","headers","data","json","animals","error","console","signup","userData","method","body","JSON","stringify","setItem","login","loginData","logout","removeItem","savePreferences","_ref","species","breed","preferences","Authorization","children","className","to","onClick","path","type","placeholder","value","onChange","e","target","map","pet","src","photos","length","medium","alt","name","description","id"],"sources":["/Users/petegonzales/Documents/Adopt-able/adoptable-pets-app/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Link, Route, Switch } from 'react-router-dom';\nimport './App.css';\nimport Toxins from './Toxins';\nimport Preferences from './Preferences';\n\nfunction App() {\n  const [pets, setPets] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n\n  useEffect(() => {\n    const storedToken = localStorage.getItem('token');\n      if (storedToken) {\n        setToken(storedToken);\n      }\n    },[]);\n    \n    const fetchPets = async () => {\n      try {\n        const response = await fetch(`${process.env.REACT_APP_API_URL}/pets?name${searchTerm}`, {\n          headers: {\n            'x-api-key': '4qHKXgfSzVbPVrZADVtJrJrsoPWjmTF6VcTGLVPk',\n          }\n    \n        });\n        const data = await response.json();\n        setPets(data.animals);\n        setLoading(false);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n  useEffect(() => {\n    fetchPets();\n  }, [searchTerm]);\n\n  const signup = async (userData) => {\n    try {\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/signup`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(userData),\n      });\n\n      const data = await response.json();\n\n      setUser(data.user);\n      setToken(data.token);\n\n      localStorage.setItem('token', data.token);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const login = async (loginData) => {\n    try {\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(loginData),\n      });\n\n      const data = await response.json();\n\n      setUser(data.user);\n      setToken(data.token);\n\n      localStorage.setItem('token', data.token);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const logout = () => {\n    setUser(null);\n    setToken(null);\n    localStorage.removeItem('token');\n\n    fetch(`${process.env.REACT_APP_API_URL}/logout`, {\n      method: 'POST',\n    });\n  };\n\n  const savePreferences = async ({ species, breed, preferences}) => {\n    try {\n      await fetch(`${process.env.REACT_APP_API_URL}/preferences`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: token,\n        },\n        body: JSON.stringify({ species, breed, preferences }),\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <nav>\n          <ul>\n            <li>\n              <Link to=\"/\">Adoptable Pets</Link>\n            </li>\n            <li>\n              <Link to=\"/toxins\">Common Pet Toxins</Link>\n            </li>\n            {user ? (\n              <>\n              <li>\n                <Link to=\"/preferences\">Preferences</Link>\n                </li>\n                <li>\n                  <button onClick={logout}>Logout</button>\n                  </li>\n                  </>\n            ) : (\n              <>\n              <li>\n                <Link to=\"/signup\">Sign Up</Link>\n                </li>\n                <li>\n                  <Link to=\"/login\">Login</Link>\n                </li>\n                </>\n            )}\n          </ul>\n        </nav>\n        <Switch>\n          <Route path=\"/toxins\">\n            <Toxins />\n          </Route>\n          {user && (\n            <Route path='/preferences'>\n              <Preferences savePreferences={savePreferences} />\n            </Route>\n          )}\n          <Route path=\"/\">\n        <h1>Adoptable Pets</h1>\n        <input\n          type=\"text\"\n          placeholder=\"Search by name\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          />\n        {loading ? (\n          <p>Loading...</p>\n        ) : (\n          <ul>\n            {pets.map((pet) => (\n              <li key={pet.id}>\n                <img src={pet.photos.length > 0 ? pet.photos[0].medium : 'no-image'} alt={pet.name} />\n                <h2>{pet.name}</h2>\n                <p>{pet.description}</p>\n              </li>\n            ))}\n          </ul>\n        )}\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n    );\n  }\n  \n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}